# Story 8.2: Download Script

**Status:** To Do
**Assignee:** U4 (Mariia Volkova)
**Priority:** High
**Sprint:** 8 - Data Collection

---

## Description

As a data engineer, I want to automate video downloading from YouTube.

---

## Acceptance Criteria

- [ ] yt-dlp script created
- [ ] Video metadata saved (title, duration, URL)
- [ ] Error handling for unavailable videos
- [ ] Progress tracking implemented

---

## Tasks

- [ ] Create download script using yt-dlp
- [ ] Save metadata to JSON/CSV
- [ ] Handle download errors gracefully
- [ ] Add progress logging
- [ ] Implement resume capability

---

## Implementation

```python
# scripts/download/download_videos.py

import yt_dlp
import json
from pathlib import Path

def download_video(url: str, output_dir: Path) -> dict:
    ydl_opts = {
        'format': 'best[height<=720]',
        'outtmpl': str(output_dir / '%(id)s.%(ext)s'),
        'quiet': True,
    }

    with yt_dlp.YoutubeDL(ydl_opts) as ydl:
        info = ydl.extract_info(url, download=True)
        return {
            'id': info['id'],
            'title': info['title'],
            'duration': info['duration'],
            'url': url
        }
```

---

## Output

- `scripts/download/download_videos.py`
- `data/raw/` (downloaded videos)
- `data/collection/metadata.json`
